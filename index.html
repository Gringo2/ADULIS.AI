<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> {/* Essential for responsiveness */}
    <title>Search Engine MVP Project - v1.0.0 Documentation (Responsive)</title>
    <style>
        :root {
            --primary-color: #0056b3; /* Deep Blue */
            --secondary-color: #17a2b8; /* Teal */
            --accent-color: #007bff; /* Bright Blue */
            --text-color: #343a40;
            --bg-color: #f8f9fa;
            --bg-light: #ffffff;
            --border-color: #dee2e6;
            --code-bg: #e9ecef;
            --code-color: #c7254e;
            --note-bg: #e7f3fe;
            --note-border: #2196F3;
            --warning-bg: #fff3cd;
            --warning-border: #ffeeba;
            --danger-bg: #f8d7da;
            --danger-border: #f5c6cb;
            --font-stack: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* --- Base Styles --- */
        html {
             scroll-behavior: smooth; /* Enable smooth scrolling */
        }

        body {
            font-family: var(--font-stack);
            line-height: 1.7;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            font-size: 16px; /* Base font size */
        }

        /* --- Sidebar Styles (Default - Large Screens) --- */
        #sidebar {
            width: 280px;
            background-color: #343a40;
            color: #f8f9fa;
            padding: 25px 15px;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            overflow-y: auto;
            border-right: 1px solid var(--border-color);
            font-size: 0.95em;
            transition: width 0.3s ease; /* Smooth transition for potential future toggling */
        }
        #sidebar h2 {
            color: #ffffff;
            font-size: 1.3em;
            margin-top: 0;
            border-bottom: 1px solid #6c757d;
            padding-bottom: 10px;
            white-space: nowrap; /* Prevent title wrapping */
        }
        #sidebar ul { list-style: none; padding: 0; margin: 0; }
        #sidebar ul li a {
            color: #adb5bd; text-decoration: none; display: block;
            padding: 8px 15px; border-radius: 4px;
            transition: background-color 0.2s ease, color 0.2s ease;
            font-size: 0.92em;
            white-space: nowrap; /* Prevent link wrapping */
            overflow: hidden;
            text-overflow: ellipsis;
        }
        #sidebar ul li a:hover, #sidebar ul li a.active {
            background-color: #495057; color: #ffffff;
        }
        #sidebar ul ul { margin-left: 15px; margin-top: 5px; }
        #sidebar ul ul li a {
            font-size: 0.88em; padding-left: 25px; color: #ced4da;
        }
         #sidebar ul ul ul li a { /* Third level */
            font-size: 0.85em; padding-left: 35px; color: #9fa6ad;
         }

        /* --- Main Content Styles (Default - Large Screens) --- */
        #main-content {
            margin-left: 300px; /* Initial margin for sidebar */
            padding: 30px 40px;
            width: calc(100% - 300px); /* Adjust width based on sidebar */
            max-width: 1200px;
            background-color: var(--bg-light);
            box-shadow: -2px 0 10px rgba(0,0,0,0.05);
            border-radius: 8px;
            margin-top: 20px;
            margin-bottom: 20px;
            transition: margin-left 0.3s ease; /* Match sidebar transition */
        }
        h1, h2, h3, h4, h5 { /* Base heading styles */
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px;
            margin-top: 40px;
            scroll-margin-top: 20px; /* Offset for potential fixed headers */
        }
        h1 { font-size: 2.2em; margin-top: 0; border-color: var(--primary-color); }
        h2 { font-size: 1.8em; }
        h3 { font-size: 1.5em; border-bottom-width: 1px; }
        h4 { font-size: 1.2em; border-bottom: none; color: var(--secondary-color); }
        h5 { font-size: 1.1em; border-bottom: none; color: #6c757d; margin-top: 20px;}

        p, li { color: #495057; margin-bottom: 12px; }
        ul, ol { margin-left: 20px; padding-left: 15px; }
        li { margin-bottom: 10px; }

        code { /* Styling for code */
            background-color: var(--code-bg); padding: 3px 6px; border-radius: 4px;
            font-family: 'Courier New', Courier, monospace; font-size: 0.95em;
            color: var(--code-color); word-wrap: break-word;
        }
        pre { /* Styling for preformatted text blocks */
            background-color: #f1f3f5; padding: 15px; border-radius: 5px;
            overflow-x: auto; /* Ensure horizontal scroll for wide code */
            border: 1px solid var(--border-color);
            font-size: 0.9em; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        pre code { /* Code inside pre */
            background-color: transparent; padding: 0; border: none;
            color: #212529; word-wrap: normal; white-space: pre;
        }
        /* --- Note/Warning/etc Styles --- */
        .note, .important, .warning, .disclaimer {
            padding: 15px 20px; margin: 25px 0; border-radius: 5px;
            border-left-width: 5px; border-left-style: solid;
        }
        .note { background-color: var(--note-bg); border-color: var(--note-border); color: #031633; }
        .important { background-color: var(--warning-bg); border-color: var(--warning-border); color: #856404; }
        .warning { background-color: var(--danger-bg); border-color: var(--danger-border); color: #721c24;}
        .disclaimer { background-color: var(--danger-bg); border-color: var(--danger-border); color: #721c24; font-weight: bold;}

        /* --- Table Styles --- */
        table {
            width: 100%; border-collapse: collapse; margin: 25px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: block; /* Allow table to scroll horizontally if needed */
            overflow-x: auto;
        }
        th, td { border: 1px solid var(--border-color); padding: 12px 15px; text-align: left; white-space: nowrap;} /* Prevent text wrapping in cells initially */
        td { white-space: normal; } /* Allow cell content to wrap */
        th { background-color: var(--code-bg); font-weight: bold; color: #495057; }
        tr:nth-child(even) { background-color: #f8f9fa; }

        /* --- Box Styles --- */
        .component-box, .section-box, .test-case {
            border: 1px solid var(--border-color); padding: 20px 25px; margin-bottom: 25px;
            border-radius: 5px; background-color: #f8f9fa;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        .component-box strong, .section-box h3, .test-case h3 {
            display: block; margin-bottom: 10px; color: var(--primary-color);
            font-size: 1.1em; border-bottom: 1px solid #ccc; padding-bottom: 8px; margin-top: 0;
        }
        .test-case h3 { color: var(--accent-color); }

        /* --- Compliance & TODO Styles --- */
        .compliance-status { /* Status badges */
            padding: 6px 10px; border-radius: 4px; font-weight: bold;
            display: inline-block; font-size: 0.9em;
        }
        .status-compliant { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;}
        .status-partial { background-color: var(--warning-bg); color: #856404; border: 1px solid var(--warning-border);}
        .status-noncompliant { background-color: var(--danger-bg); color: #721c24; border: 1px solid var(--danger-border);}
        .todo-list { /* TODO list container */
            background-color: #f0f0f0; border: 1px solid #ccc; padding: 20px;
            margin-top: 20px; border-radius: 5px;
        }
        .todo-list h4 { /* Heading within TODO list */
             margin-top: 0; border-bottom: 1px solid #ccc; padding-bottom: 10px; color: #333;
        }
        .todo-item { /* Individual TODO item */
            margin-bottom: 10px; padding-left: 25px; position: relative;
        }
        .todo-item::before { /* Checkbox styling */
            content: "‚òê"; position: absolute; left: 0; top: 1px;
            font-size: 1.3em; color: var(--danger-border);
        }
        .category-heading { /* Headings within TODO list */
            font-weight: bold; margin-top: 20px; margin-bottom: 8px;
            color: var(--primary-color); font-size: 1.05em;
        }

        .path { font-family: monospace; color: #666;}
        .terminal { font-family: monospace; color: #e83e8c; }

        /* ============================================= */
        /* == RESPONSIVE STYLES == */
        /* ============================================= */

        /* --- Medium Screens (Tablets, Smaller Laptops) --- */
        @media (max-width: 992px) {
            body {
                display: block; /* Change flex display to block */
            }

            #sidebar {
                position: static; /* Remove fixed positioning */
                width: 100%; /* Take full width */
                height: auto; /* Height adjusts to content */
                margin-bottom: 20px; /* Add space below */
                border-right: none; /* Remove border */
                box-sizing: border-box; /* Include padding in width calculation */
                 padding: 15px; /* Adjust padding */
            }
             #sidebar h2 {
                 font-size: 1.2em; /* Slightly smaller title */
             }
             #sidebar ul li a {
                 padding: 10px 15px; /* Slightly larger tap targets */
             }


            #main-content {
                margin-left: 0; /* Remove margin needed for fixed sidebar */
                width: 100%; /* Take full width */
                padding: 20px; /* Adjust padding */
                box-sizing: border-box; /* Include padding in width calculation */
                border-radius: 0; /* Optional: remove rounding on small screens */
                box-shadow: none; /* Optional: remove shadow */
                margin-top: 0;
            }

             h1 { font-size: 2em; }
             h2 { font-size: 1.6em; }
             h3 { font-size: 1.3em; }
        }

        /* --- Small Screens (Mobile Phones) --- */
        @media (max-width: 576px) {
             body {
                 font-size: 15px; /* Slightly smaller base font */
             }
             #main-content {
                 padding: 15px; /* Reduce padding further */
             }
             h1 { font-size: 1.8em; }
             h2 { font-size: 1.5em; }
             h3 { font-size: 1.2em; }
             h4 { font-size: 1.1em; }

             pre {
                 font-size: 0.85em; /* Smaller code font */
                 padding: 10px;
             }
             code {
                 font-size: 0.9em;
             }
             th, td {
                 padding: 8px 10px; /* Smaller table padding */
             }
             .component-box, .section-box, .test-case {
                 padding: 15px 20px;
             }
             /* Optional: Adjust sidebar link padding further if needed */
             #sidebar ul li a {
                 padding: 8px 12px;
             }
        }

    </style>
</head>
<body>

    <aside id="sidebar">
        <h2>Project Navigation</h2>
        <!-- Sidebar Content (Same as before) -->
        <ul>
            <li><a href="#section_overview">1. Overview & Purpose</a></li>
            <li><a href="#section_mvp_design">2. MVP Design (v1.0.0)</a>
                <ul>
                    <li><a href="#subsection_mvp_features">2.1 Features</a></li>
                    <li><a href="#subsection_mvp_arch">2.2 Architecture</a></li>
                    <li><a href="#subsection_mvp_design_elements">2.3 Design Elements</a></li>
                    <li><a href="#subsection_mvp_tech_stack">2.4 Tech Stack & Limits</a></li>
                </ul>
            </li>
            <li><a href="#section_mvp_setup">3. MVP Setup & Operation</a>
                <ul>
                    <li><a href="#subsection_setup_prereqs">3.1 Prerequisites</a></li>
                    <li><a href="#subsection_setup_hadoop">3.2 Hadoop (Pseudo-Dist) Setup</a></li>
                    <li><a href="#subsection_setup_kafka">3.3 Kafka (Single Node) Setup</a></li>
                    <li><a href="#subsection_setup_vespa">3.4 Vespa (Single Node) Setup</a></li>
                    <li><a href="#subsection_setup_nutch">3.5 Nutch Setup</a></li>
                    <li><a href="#subsection_setup_custom_apps_notes">3.6 Notes on Custom Apps</a></li>
                    <li><a href="#subsection_setup_running_stopping">3.7 Running/Stopping MVP</a></li>
                </ul>
            </li>
             <li><a href="#section_compliance">4. Compliance Assessment</a>
                <ul>
                    <li><a href="#subsection_compliance_pdpl">4.1 PDPL Overview</a></li>
                    <li><a href="#subsection_compliance_mvp_context">4.2 MVP Context</a></li>
                    <li><a href="#subsection_compliance_assessment">4.3 v1.0.0 Assessment</a></li>
                    <li><a href="#subsection_compliance_todo">4.4 Compliance TODO List</a></li>
                </ul>
            </li>
            <li><a href="#section_planning">5. Post-MVP Planning</a>
                <ul>
                    <li><a href="#subsection_planning_analysis">5.1 Analysis & Strategy</a></li>
                    <li><a href="#subsection_planning_iteration">5.2 Next Iteration Plan</a></li>
                    <li><a href="#subsection_planning_guidelines">5.3 Implementation Guide</a></li>
                </ul>
            </li>
            <li><a href="#section_project_info">6. Project Information</a>
                <ul>
                    <li><a href="#subsection_project_glossary">6.1 Glossary</a></li>
                    <li><a href="#subsection_project_changelog">6.2 Change Log</a></li>
                </ul>
            </li>
            <li><a href="#section_appendix">7. Appendix: Nutch Testing</a>
                <ul>
                    <li><a href="#appendix_crawler_test_env">7.1 Crawler Test Env Setup</a></li>
                    <li><a href="#appendix_crawler_testing">7.2 Comprehensive Crawler Testing</a></li>
                </ul>
            </li>
            <li><a href="#section_conclusion">8. Overall Conclusion</a></li>
        </ul>
    </aside>

    <main id="main-content">
        <!-- Main Content Sections (Same HTML structure as before) -->
        <section id="section_overview">
             <h1>Search Engine MVP Project Documentation (v1.0.0 Focus)</h1>
             <!-- ... content ... -->
        </section>

        <section id="section_mvp_design">
            <h2>2. MVP Design (v1.0.0)</h2>
            <section id="subsection_mvp_features"><h3>2.1 Features (MVP v1.0.0)</h3><!-- ... content ... --></section>
            <section id="subsection_mvp_arch"><h3>2.2 Architecture (MVP v1.0.0)</h3><h4>2.2.1 Architectural Overview</h4><!-- ... --><h4>2.2.2 Component Breakdown</h4><!-- ... --><h4>2.2.3 Data Flow Summary & Schema</h4><!-- ... --></section>
            <section id="subsection_mvp_design_elements"><h3>2.3 Design Elements & Choices (MVP v1.0.0)</h3><!-- ... content ... --></section>
            <section id="subsection_mvp_tech_stack"><h3>2.4 Technology Stack & Limits (MVP v1.0.0)</h3><!-- ... content ... --></section>
        </section>

        <section id="section_mvp_setup">
             <h2>3. MVP Setup & Operation (v1.0.0 Baseline)</h2>
             <section id="subsection_setup_prereqs"><h3>3.1 Prerequisites</h3><!-- ... content ... --></section>
             <section id="subsection_setup_hadoop"><h3>3.2 Hadoop (Pseudo-Distributed) Setup</h3><!-- ... content ... --></section>
             <section id="subsection_setup_kafka"><h3>3.3 Kafka (Single Node) Setup</h3><!-- ... content ... --></section>
             <section id="subsection_setup_vespa"><h3>3.4 Vespa (Single Node) Setup</h3><!-- ... content ... --></section>
             <section id="subsection_setup_nutch"><h3>3.5 Nutch Setup</h3><!-- ... content ... --></section>
             <section id="subsection_setup_custom_apps_notes"><h3>3.6 Notes on Custom Applications (Conceptual for MVP)</h3><!-- ... content ... --></section>
             <section id="subsection_setup_running_stopping"><h3>3.7 Running & Stopping the MVP</h3><!-- ... content ... --></section>
        </section>

        <section id="section_compliance">
             <h2>4. Compliance Assessment (MVP v1.0.0 vs. Ethiopian PDPL)</h2>
             <section id="subsection_compliance_pdpl"><h3>4.1 PDPL Overview</h3><!-- ... content ... --></section>
             <section id="subsection_compliance_mvp_context"><h3>4.2 MVP Data Processing Context</h3><!-- ... content ... --></section>
             <section id="subsection_compliance_assessment"><h3>4.3 v1.0.0 Compliance Assessment Details</h3><!-- ... content ... --></section>
             <section id="subsection_compliance_todo"><h3>4.4 Compliance TODO List (Derived from Assessment)</h3><!-- ... content ... --></section>
        </section>

        <section id="section_planning">
            <h2>5. Post-MVP Planning</h2>
            <section id="subsection_planning_analysis"><h3>5.1 Post-MVP Analysis & Strategic Decision</h3><!-- ... content ... --></section>
            <section id="subsection_planning_iteration"><h3>5.2 Planning the Next Iteration (e.g., v1.1.0)</h3><!-- ... content ... --></section>
            <section id="subsection_planning_guidelines"><h3>5.3 Implementation Guidelines for Next Iteration(s)</h3><!-- ... content ... --></section>
        </section>

        <section id="section_project_info">
            <h2>6. Project Information</h2>
            <section id="subsection_project_glossary"><h3>6.1 Glossary</h3><!-- ... content ... --></section>
            <section id="subsection_project_changelog"><h3>6.2 Change Log</h3><!-- ... content ... --></section>
        </section>

        <section id="section_appendix">
             <h2>7. Appendix: Nutch Testing</h2>
             <section id="appendix_crawler_test_env"><h3>7.1 Crawler Test Environment Setup Guide</h3><!-- ... content ... --></section>
             <section id="appendix_crawler_testing"><h3>7.2 Comprehensive Crawler Testing Guide</h3><!-- ... content ... --></section>
        </section>

        <section id="section_conclusion">
             <h2>8. Overall Conclusion</h2>
             <!-- ... content ... -->
        </section>

    </main> <!-- End of main-content -->

    <script>
        // --- Same JavaScript for sidebar highlighting and smooth scroll as before ---
        document.addEventListener("DOMContentLoaded", function() {
            const links = document.querySelectorAll('#sidebar a');
            const sections = document.querySelectorAll('section[id]'); // Target sections for scrollspy
            let currentActive = null;

            function changeActiveLink() {
                let index = sections.length;
                let found = false;

                while(--index >= 0) {
                    const sectionTop = sections[index].offsetTop;
                    // Use a small offset from the top of the viewport
                    if (window.scrollY + 60 >= sectionTop) {
                        const targetId = sections[index].id;
                        const activeLink = document.querySelector(`#sidebar a[href="#${targetId}"]`);

                        if (activeLink) {
                             // Remove active class from all links first
                            links.forEach(link => link.classList.remove('active'));
                            // Remove active class from parent links if any
                             document.querySelectorAll('#sidebar a.parent-active').forEach(pl => pl.classList.remove('parent-active'));


                            activeLink.classList.add('active');
                            currentActive = activeLink;

                            // Add parent highlighting if it's a sub-link
                            let parentLi = activeLink.closest('ul')?.closest('li'); // Find parent LI if nested
                            if(parentLi){
                                let parentLink = parentLi.querySelector('a');
                                if(parentLink){
                                     parentLink.classList.add('parent-active'); // Use a different class for parent highlight maybe
                                }
                            }

                            found = true;
                        }
                        break;
                    }
                }
                 // If scrolled near top, potentially deactivate all
                 if (!found && currentActive) {
                    if (window.scrollY < (sections[0]?.offsetTop || 100) - 80) { // Check against first section's top
                        currentActive.classList.remove('active');
                        // Remove parent highlighting too
                        document.querySelectorAll('#sidebar a.parent-active').forEach(pl => pl.classList.remove('parent-active'));
                        currentActive = null;
                    }
                 } else if (!found && !currentActive) {
                     // Optional: Highlight first link by default if nothing else is active
                     // links[0]?.classList.add('active');
                     // currentActive = links[0];
                 }
            }

            let scrollTimeout;
            window.addEventListener('scroll', function() {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(changeActiveLink, 50);
            });

            changeActiveLink(); // Initial call

             links.forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        e.preventDefault();
                        const targetElement = document.querySelector(href);
                        if (targetElement) {
                            // Calculate scroll position considering potential fixed headers
                            const offsetTop = targetElement.offsetTop - 10; // Adjust 10px offset as needed
                            window.scrollTo({
                                top: offsetTop,
                                behavior: 'smooth'
                            });

                            // Update URL hash
                            if(history.pushState) { history.pushState(null, null, href); }
                            else { location.hash = href; }

                            // Manually update active state on click for immediate feedback
                            links.forEach(l => l.classList.remove('active'));
                            document.querySelectorAll('#sidebar a.parent-active').forEach(pl => pl.classList.remove('parent-active')); // Clear old parent highlights
                            this.classList.add('active');
                            currentActive = this;
                             // Add parent highlighting on click
                            let parentLi = this.closest('ul')?.closest('li');
                            if(parentLi){
                                let parentLink = parentLi.querySelector('a');
                                if(parentLink) parentLink.classList.add('parent-active');
                            }
                        }
                    }
                });
            });
        });
    </script>

</body>
</html>